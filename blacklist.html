<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>PTT Hate Speech Tagger</title>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link href="styles/style.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>PTT Hate Speech Tagger</h1>
    <div class="buttonsection">
      <button id="home" type="button" class="collapsible">首頁</button>
      <button id="tutorial" type="button" class="collapsible">使用教學</button>
      <button id="rank" type="button" class="collapsible">排行榜</button>
      <button id="blacklist" type="button" class="collapsible">黑名單查詢</button>
    </div>

    <div class="container">
        <div class="section">
            <h2>黑名單查詢</h2>
            <hr>
            <form>輸入 PTT ID：<input type="text" name="id" id="searchinput"></form>
            <button id="searchbutton" type="button">GO!</button>
        </div>   
        <div class="section" id="result">
        </div>      
    </div>
    
    <script src="scripts/main.js"></script>
    <script>
        var searchbutton = document.getElementById("searchbutton");
        var searchinput = document.getElementById("searchinput");
        

        var data = {
            "count": 2,
            "data": [
                {
                    "content": "推文內容 1",
                    "ip": "123.123.123",
                    "time": "08/26 03:20",
                    "url": "https://www.ptt.cc/bbs/Lifeismoney/M.1629871637.A.4FF.html"
                },
                {
                    "content": "推文內容 2",
                    "ip": "123.123.123",
                    "time": "08/26 05:20",
                    "url": "https://www.ptt.cc/bbs/Lifeismoney/M.1627569628.A.9F4.html"
                }
            ]
        } 


        searchinput.addEventListener("keyup", function(event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                searchbutton.click();
          }
        });
        
              
        searchbutton.addEventListener("click", function () {
            let input = document.getElementById("searchinput").value;
            let result = document.getElementById("result");
            IdHtml = "<h3>" + input + " 的推文紀錄</h3>";
            result.innerHTML = IdHtml ;
            for (var i = 0; i < data["count"]; i++) {
                let pushelement = document.createElement("button");
                let PushHtml =  "<a class=\"push-content\" style='float:left'>" + data["data"][i]["content"] + "<\a>" + 
                                "<a class=\"push-ip-time\" style='float:right'>" + data["data"][i]["ip"] + "    " + data["data"][i]["time"] + "<\a>" ;
                pushelement.innerHTML = PushHtml;
                pushelement.className = "push";
                var url = data["data"][i]["url"];
                pushelement.addEventListener('click', function () {
                    // location.href = url;
                    window.open(url, '_blank');
                });
                console.log(data["data"][i]["url"]);
                result.appendChild(pushelement);
            }
        });
    </script>
  </body>
</html>
